"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8540],{88540:function(e,n,t){t.d(n,{Z:function(){return ea}});var a,o,r=t(59499),s=t(67294),i=t(9008),c=t.n(i),u=t(5152),l=t.n(u),d=t(85518),m=t(13794),p=t(36864),b=t(71383),g=t(22865),h=t(70598),f=t(85893);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}var v=(0,g.Ps)(a||(a=(0,b.Z)(["\n  query GetSiteSession {\n    getSiteSession {\n      status\n      message\n      mobileNumber\n      proceed\n      hash\n      sessionStatus\n      clientMSISDNS {\n        msisdn\n      }\n    }\n  }\n"]))),j=function(e){var n=(0,p.Z)({},e);return(0,f.jsx)(h.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({query:v},n))},w=t(50029),x=t(16835),S=t(87794),O=t.n(S),k=t(4662),C=t(63457),Z=t(43832),D=t(32692),I=t(11163),P=t(95477),E=t(13433),N=t(50319),A=t(88460),F=t(22318),W=t(28889),U=t(41749),G=t(62811),_=t(16484),H=t(79333),M=t(69669),T=t(79865),B=t(43975),V=t(49180),R=t(92113),q=(0,g.Ps)(o||(o=(0,b.Z)(["\n  mutation DestroySiteLoginCookie {\n    deleteSiteLoginCookie {\n      status\n      message\n    }\n  }\n"]))),L=t(1079),Y=t(77212),X=l()(function(){return t.e(451).then(t.bind(t,69214))},{loading:function(){return(0,f.jsx)(B.Z,{})},loadableGenerated:{webpack:function(){return[69214]}}}),z=function(e){var n,t=e.children,a=s.useState(!1),o=(0,x.Z)(a,2),r=o[0],i=o[1],c=(0,k.Z)(),u=(0,I.useRouter)(),l=(0,E.l)(G.UG),d=(0,E.l)(G.HH),m=(0,E.l)(G.P6),p=(0,E.l)(G.nS),b=(0,E.l)(G.qF),g=m.status,h=(0,C.Z)(c.breakpoints.down("md")),y=(0,M.Z)({isMobileTablet:h}),v=(0,M.v)(),j=function(){(0,G.P6)({status:!1,headerTitle:""})},S=(0,E.l)(G.XJ),B=Number("900")/60,z=1e3*Number("900"),J=(0,N.D)(q),K=(0,x.Z)(J,1)[0],Q=s.useState(!1),$=(0,x.Z)(Q,2),ee=($[0],$[1]),en=function(){return ee(!1)},et=s.useState(z),ea=(0,x.Z)(et,2),eo=(ea[0],ea[1]),er=s.useState(!1),es=(0,x.Z)(er,2),ei=es[0],ec=es[1],eu=s.useState(0),el=(0,x.Z)(eu,2),ed=(el[0],el[1]),em=s.useState(+new Date),ep=(0,x.Z)(em,2),eb=(ep[0],ep[1]),eg=(n=(0,w.Z)(O().mark(function e(){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,G.UG)(!0),K().then(function(e){e.data.deleteKYCCookie.status&&(0,G.UG)(!1)}).catch(function(){(0,G.UG)(!1)});case 2:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),eh=function(){eg(),ec(!0),ee(!0)},ef=function(){(0,G.UG)(!1),ec(!1)},ey=(0,A.Yp)({timeout:z,onActive:en,onIdle:eh}),ev=ey.getRemainingTime,ej=ey.getLastActiveTime,ew=ey.getElapsedTime;return s.useEffect(function(){if(window){var e,n,t=null===(e=window)||void 0===e?void 0:null===(n=e.localStorage)||void 0===n?void 0:n.getItem("isNewOrOldPage");i(t)}eo(ev()),eb(ej()),ed(ew()),setInterval(function(){eo(ev()),eb(ej()),ed(ew())},1e3)},[r]),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("main",{className:y.root,children:[(0,f.jsx)(D.Z,{open:l,className:y.backdrop,children:(0,f.jsx)(P.Z,{color:"inherit"})}),d&&(0,f.jsx)(_.default,{isMobileTablet:h,isNewOrOldPage:r}),(0,f.jsxs)(Z.Z,{maxWidth:r?"2560px":"xl",className:r?d?y.containerWrapper:y.noHeaderContainerWrapper:d?v.containerWrapper:v.noHeaderContainerWrapper,children:[(0,f.jsx)(R.Z,{}),h&&S?(0,f.jsx)(V.R,{children:function(e){var n=e.getAlertCookie.displayAlert;return(0,f.jsx)(X,{displayAlert:n})}}):null,t]}),g&&(0,f.jsx)(T.Z,{open:g,closeSocial:j}),h&&(p||b)?(0,f.jsx)(H.Z,{location:u}):null,(0,f.jsx)(Y.default,{modalHeader:"You have been idle for more than ".concat(B," minutes"),modalContent:(0,f.jsx)(W.Z,{children:(0,f.jsx)(F.Z,{variant:"body1",style:{fontWeight:"600",textAlign:"center",padding:"10px"},children:"Your session has expired due to inactivity. Click Okay to restart."})}),modalActions:(0,f.jsxs)(U.Z,{container:!0,direction:"row",justify:"space-evenly",children:[(0,f.jsx)(U.Z,{item:!0,xs:6,style:{textAlign:"center"},children:(0,f.jsx)(L.default,{width:"50%",variant:"contained",color:"white",bgColor:c.palette.greyButton.main,onClick:function(){return ef()},children:"Cancel"})}),(0,f.jsx)(U.Z,{item:!0,xs:6,style:{textAlign:"center"},children:(0,f.jsx)(L.default,{width:"50%",variant:"contained",color:"white",onClick:function(){return window.location.reload()},children:"Okay"})})]}),handleClose:ef,open:ei})]})})},J=t(41855),K=t(13916),Q=["/discover/locate-shop","/feedback","/","/account/balances","/bundles/okoa","/bundles/okoa/okoa-statement-summary","/account","/home-products","/home-products/get-4g-router","/home-fibre","/home-fibre/fibre-pay","/home-fibre/plans","/home-fibre/data-sharing","/home-fibre/data-sharing/activate","/home-fibre/data-sharing/manage-beneficiary","/fibre-products","/home-internet","/home-internet/account","/home-internet/buy-plan","/home-internet/add-account","/home-fibre/secure-net/onboarding","/home-fibre/secure-net/sign-in","/home-fibre/secure-net/change-password","/home-fibre/secure-net/content-filtering","/home-fibre/secure-net/parental-control","/home-fibre/secure-net","/home-internet/get-secure-net","/home-internet/4G-for-home","/home-internet/entertainment","/home-internet/get-home-cctv","/home-internet/home-insurance","/bundles","/account/data-sharing","/account/data-sharing/activate","/account/data-sharing/manage-beneficiary","/account/data-sharing/start-sharing","/account/usage/data-sharing/activate","/account/usage/data-sharing","/account/usage/data-sharing/manage-beneficiary","/account/usage/data-sharing/start-sharing","/bundles/tunukiwa","/bundles/roaming","/bundles/roaming/roaming-bundles","/bundles/roaming/vodacom&vodafone-bundles","/bundles/international-bundles","/account/top-up","/account/puk","/home-fibre/change-plan","/account/pre-to-post","/account/manage-postpay","/account/postpay-resources","/account/join-postpay-with-resources","/account/postpay-bill-payment","/account/usage","/account/usage/breakdown","/account/usage/data-alerts","/account/usage-limit","/sms-bundles","/account/sambaza","/account/bonga","/account/bonga/bonga-rewards","/account/bonga/bonga-rewards/mini-statement","/account/bonga/accumulation/history","/account/bonga/redeem/history","/account/bonga/change-pin","/account/bonga/lipa-na-bonga","/home-internet/get-4g-router","/home-internet/4G","/account/subscriptions","/bundles/normal","/account/usage-manage","/account/set-usage-limit","/account/subscriptions/promotional-messages","/account/recommend","/account/ba-recommend","/home-fibre/manage-home-fibre","/home-fibre/manage-home-fibre/change-wifi-name","/home-fibre/manage-home-fibre/change-wifi-password","/bundles/easy-talk","/bundles/easy-talk/faqs","/bundles/youtube","/bundles/no-expiry","/bundles/s-plug","/bundles/s-plug/daily-bundles","/bundles/s-plug/weekly-bundles","/bundles/s-plug/monthly-bundles","/bundles/special-bundles","/account/fraud","/account/change-service-pin","/account/usage/set-limit","/bundles/tunukiwa/minutes","/bundles/tunukiwa/sms","/bundles/data-only","/bundles/AllInOneBundles","/bundles/sherehe","/bundles/daima/faqs","/bundles/daima","/bundles/go-monthly","/account/number-reporting","/account/number-reporting/FAQs","/account/number-reporting/tips","/account/bonga/mini-statements","/account/bonga/bonga-food","/account/bonga/bonga-donate","/account/lipa-na-data","/bundles/5GBundles","/home-fibre/fiber-insurance","/sms-bundles","/bundles/go-monthly/spin-and-win-history","/mpesa","/mpesa/mpesa-recent-transactions","/mpesa/mpesa-full-statement","/mpesa/change-statement-email","/mpesa/cost-calculator","/mpesa/mledger/money-in","/mpesa/mledger/money-in/parties","/mpesa/mledger/money-in/parties/details","/mpesa/mledger/money-out","/mpesa/mledger/money-out/parties","/mpesa/mledger/money-out/parties/details","/mpesa/mledger","/mpesa/mpesa-unlock-pin","/discover/e-newspaper/my-newspapers/view","/discover/e-newspaper/my-newspapers","/discover/e-newspaper/publications","elimu","/discover/videos/categories","/discover/videos","/discover/videos/showmax"],$=t(83454);function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function en(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var et=l()(function(){return Promise.all([t.e(9572),t.e(2448),t.e(2254),t.e(5403)]).then(t.bind(t,37116))},{loading:function(){return(0,f.jsx)(B.Z,{})},loadableGenerated:{webpack:function(){return[37116]}}}),ea=function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=d.Dt?"Android":d.xk?"Windows":d.gn?"IOS":"Not detected";return function(t){return(0,f.jsxs)(f.Fragment,{children:[n&&""!==n&&(0,f.jsx)(c(),{children:(0,f.jsx)("title",{children:n})}),"true"===$.env.NEXT_PUBLIC_MIDDLEWARE_REDIRECTION&&Q.includes(t.location.pathname)?(0,f.jsx)(j,{fetchPolicy:"network",hideError:!0,children:function(n){var a=n.getSiteSession,r=a.sessionStatus,s=a.status,i=a.message,c=a.mobileNumber,u=a.hash,l=a.clientMSISDNS,d=t.location.pathname,m="/"===d?"Home":d.split("/")[1],p=d.split("/")[2]?d.split("/")[2]:"",b=d.split("/")[3]?d.split("/")[3]:"",g='\n                    visitor = typeof Visitor !== \'undefined\' ? Visitor.getInstance("5E77358E5CF664BB0A495E6E@AdobeOrg", {overwriteCrossDomainMCIDAndAID: true}) : "",\n                    mcvid =  typeof Visitor !== \'undefined\' ? visitor.getMarketingCloudVisitorID() : "",\n                    digitalData = {\n                        safaricomworld: {\n                            page: {\n                                pageInfo: {\n                                    pageName:  "SFWeb|'.concat(m.toUpperCase(),'",\n                                    title:  "').concat(m.toUpperCase(),'" + " | Safaricom World",\n                                },\n                                category: {\n                                    primaryCategory:  "SFWeb|').concat(m.toUpperCase(),'",\n                                    subCategory1:  "').concat(p?"SFWeb|".concat(p.toUpperCase()):"",'",\n                                    subCategory2:  "').concat(b?"SFWeb|".concat(b.toUpperCase()):"",'",\n                                },\n                            },\n                            user: {\n                                userInfo: {\n                                    visitorID: mcvid,\n                                    userID: "').concat(u,'", \n                                    device: "').concat(o,'", \n                                    loginStatus: "').concat(s||!0,"\", \n                                },\n                            },\n                        },\n                },\n                 typeof _satellite !== 'undefined' ? _satellite.track('pageload') : \"\"\n                ");return"Home"!==m&&"/account/balances"!==d&&(0,K.Z)(g),(0,f.jsx)(f.Fragment,{children:s?(0,f.jsx)(z,{children:(0,f.jsx)(e,en(en({},t),{},{data:{mobileNumber:c,hash:u,status:s,message:i,sessionStatus:r,clientMSISDNS:l}}))}):(0,f.jsx)(et,{})})}}):(0,f.jsx)(m.Hb,{operation:"getToken",fetchPolicy:"cache-and-network",children:function(n){var r=n.getToken,s=r.status,i=r.message,c=r.mobileNumber,u=r.hash,l={mobileNumber:c,hash:u,status:s,message:i},d=t.location.pathname,m="/"===d?"Home":d.split("/")[1],p=d.split("/")[2]?d.split("/")[2]:"",b=d.split("/")[3]?d.split("/")[3]:"",g='\n                                                  visitor = typeof Visitor !== \'undefined\' ? Visitor.getInstance("5E77358E5CF664BB0A495E6E@AdobeOrg", {overwriteCrossDomainMCIDAndAID: true}) : "",\n                                                  mcvid =  typeof Visitor !== \'undefined\' ? visitor.getMarketingCloudVisitorID() : "",\n                                                  digitalData = {\n                                                      safaricomworld: {\n                                                          page: {\n                                                              pageInfo: {\n                                                                  pageName:  "SFWeb|'.concat(m.toUpperCase(),'",\n                                                                  title:  "').concat(m.toUpperCase(),'" + " | Safaricom World",\n                                                              },\n                                                              category: {\n                                                                  primaryCategory:  "SFWeb|').concat(m.toUpperCase(),'",\n                                                                  subCategory1:  "').concat(p?"SFWeb|".concat(p.toUpperCase()):"",'",\n                                                                  subCategory2:  "').concat(b?"SFWeb|".concat(b.toUpperCase()):"",'",\n                                                              },\n                                                          },\n                                                          user: {\n                                                              userInfo: {\n                                                                  visitorID: mcvid,\n                                                                  userID: "').concat(u,'", \n                                                                  device: "').concat(o,'", \n                                                                  loginStatus: "').concat(s||!0,"\", \n                                                              },\n                                                          },\n                                                      },\n                                              },\n                                               typeof _satellite !== 'undefined' ? _satellite.track('pageload') : \"\"\n                                              ");return"Home"!==m&&"/account/balances"!==d&&(0,K.Z)(g),(0,f.jsx)(f.Fragment,{children:s?(0,f.jsx)(f.Fragment,{children:a?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(e,en(en({},t),{},{data:l}))}):(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(e,en(en({},t),{},{data:l}))})})}):(0,f.jsx)(et,{})})}})]})}}}}]);